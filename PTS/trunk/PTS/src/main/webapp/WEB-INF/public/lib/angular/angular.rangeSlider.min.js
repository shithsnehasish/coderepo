(function(){angular.module("ui-rangeSlider",[]).directive("rangeSlider",["$document","$filter","$log",function(d,g,l){var h=window.PointerEvent?1:(window.MSPointerEvent?2:("ontouchend" in document?3:4)),k=".rangeSlider",e={disabled:false,orientation:"horizontal",step:0,decimalPlaces:0,showValues:true,preventEqualMinMax:false},i=(h===1?"pointerdown":(h===2?"MSPointerDown":(h===3?"touchstart":"mousedown")))+k,b=(h===1?"pointermove":(h===2?"MSPointerMove":(h===3?"touchmove":"mousemove")))+k,f=(h===1?"pointerup":(h===2?"MSPointerUp":(h===3?"touchend":"mouseup")))+k,c=function(m){try{return[(m.clientX||m.originalEvent.clientX||m.originalEvent.touches[0].clientX),(m.clientY||m.originalEvent.clientY||m.originalEvent.touches[0].clientY)]}catch(n){return["x","y"]}},a=function(m){return(m<0?0:(m>100?100:m))},j=function(m){return !isNaN(parseFloat(m))&&isFinite(m)};if(h<4){angular.element("html").addClass("ngrs-touch")}else{angular.element("html").addClass("ngrs-no-touch")}return{restrict:"A",replace:true,template:['<div class="ngrs-range-slider">','<div class="ngrs-runner">','<div class="ngrs-handle ngrs-handle-min"><i></i></div>','<div class="ngrs-handle ngrs-handle-max"><i></i></div>','<div class="ngrs-join"></div>',"</div>",'<div class="ngrs-value ngrs-value-min" ng-show="showValues">{{filteredModelMin}}</div>','<div class="ngrs-value ngrs-value-max" ng-show="showValues">{{filteredModelMax}}</div>',"</div>"].join(""),scope:{disabled:"=?",min:"=",max:"=",modelMin:"=?",modelMax:"=?",onHandleDown:"&",onHandleUp:"&",orientation:"@",step:"@",decimalPlaces:"@",filter:"@",filterOptions:"@",showValues:"@",pinHandle:"@",preventEqualMinMax:"@"},link:function(n,o,B,z){var D=angular.element(o),m=[o.find(".ngrs-handle-min"),o.find(".ngrs-handle-max")],A=o.find(".ngrs-join"),u="left",C="right",r=0,v=[0,0],x=0;n.filteredModelMin=n.modelMin;n.filteredModelMax=n.modelMax;B.$observe("disabled",function(F){if(!angular.isDefined(F)){n.disabled=e.disabled}n.$watch("disabled",w)});B.$observe("orientation",function(J){if(!angular.isDefined(J)){n.orientation=e.orientation}var I=n.orientation.split(" "),H;for(var G=0,F=I.length;G<F;G++){I[G]="ngrs-"+I[G]}H=I.join(" ");D.addClass(H);if(n.orientation==="vertical"||n.orientation==="vertical left"||n.orientation==="vertical right"){u="top";C="bottom";r=1}});B.$observe("step",function(F){if(!angular.isDefined(F)){n.step=e.step}});B.$observe("decimalPlaces",function(F){if(!angular.isDefined(F)){n.decimalPlaces=e.decimalPlaces}});B.$observe("showValues",function(F){if(!angular.isDefined(F)){n.showValues=e.showValues}else{if(F==="false"){n.showValues=false}else{n.showValues=true}}});B.$observe("pinHandle",function(F){if(!angular.isDefined(F)){n.pinHandle=null}else{if(F==="min"||F==="max"){n.pinHandle=F}else{n.pinHandle=null}}n.$watch("pinHandle",s)});B.$observe("preventEqualMinMax",function(F){if(!angular.isDefined(F)){n.preventEqualMinMax=e.preventEqualMinMax}else{if(F==="false"){n.preventEqualMinMax=false}else{n.preventEqualMinMax=true}}});n.$watch("min",t);n.$watch("max",t);n.$watch("modelMin",y);n.$watch("modelMax",y);function s(F){if(F==="min"){angular.element(m[0]).css("display","none");angular.element(m[1]).css("display","block")}else{if(F==="max"){angular.element(m[0]).css("display","block");angular.element(m[1]).css("display","none")}else{angular.element(m[0]).css("display","block");angular.element(m[1]).css("display","block")}}}function w(F){if(F){D.addClass("disabled")}else{D.removeClass("disabled")}}function t(){if(n.min>n.max){E("min must be less than or equal to max")}if(angular.isDefined(n.min)&&angular.isDefined(n.max)){if(!j(n.min)){E("min must be a number")}if(!j(n.max)){E("max must be a number")}x=n.max-n.min;v=[n.min,n.max];y()}}function y(){if(n.modelMin>n.modelMax){p("modelMin must be less than or equal to modelMax");n.modelMin=n.modelMax}if((angular.isDefined(n.modelMin)||n.pinHandle==="min")&&(angular.isDefined(n.modelMax)||n.pinHandle==="max")){if(!j(n.modelMin)){if(n.pinHandle!=="min"){p("modelMin must be a number")}n.modelMin=n.min}if(!j(n.modelMax)){if(n.pinHandle!=="max"){p("modelMax must be a number")}n.modelMax=n.max}var G=a(((n.modelMin-n.min)/x)*100),F=a(((n.modelMax-n.min)/x)*100);n.modelMin=Math.max(n.min,n.modelMin);n.modelMax=Math.min(n.max,n.modelMax);if(n.filter){n.filteredModelMin=g(n.filter)(n.modelMin,n.filterOptions);n.filteredModelMax=g(n.filter)(n.modelMax,n.filterOptions)}else{n.filteredModelMin=n.modelMin;n.filteredModelMax=n.modelMax}if(n.min===n.max&&n.modelMin==n.modelMax){angular.element(m[0]).css(u,"0%");angular.element(m[1]).css(u,"100%");angular.element(A).css(u,"0%").css(C,"0%")}else{angular.element(m[0]).css(u,G+"%");angular.element(m[1]).css(u,F+"%");angular.element(A).css(u,G+"%").css(C,(100-F)+"%");if(G>95){angular.element(m[0]).css("z-index",3)}}}}function q(F){var G=m[F];G.bind(i+"X",function(N){var O=(F===0?"ngrs-handle-min":"ngrs-handle-max")+"-down",M=G.add(d).add("body"),J=(F===0?n.modelMin:n.modelMax)-n.min,L=(J/x)*100,I=c(N),H=I,K=false;if(angular.isFunction(n.onHandleDown)){n.onHandleDown()}angular.element("body").bind("selectstart"+k,function(){return false});if(!n.disabled){G.addClass("ngrs-down");D.addClass("ngrs-focus "+O);angular.element("body").addClass("ngrs-touching");d.bind(b,function(V){V.preventDefault();var U=c(V),R,S,P,Q=(n.step/x)*100,T=(((F===0?n.modelMax:n.modelMin)-n.min)/x)*100;if(U[0]==="x"){return}U[0]-=I[0];U[1]-=I[1];R=[(H[0]!==U[0]),(H[1]!==U[1])];S=L+((U[r]*100)/(r?D.height():D.width()));S=a(S);if(n.preventEqualMinMax){if(Q===0){Q=(1/x)*100}if(F===0){T=T-Q}else{if(F===1){T=T+Q}}}if(F===0){S=S>T?T:S}else{if(F===1){S=S<T?T:S}}if(n.step>0){if(S<100&&S>0){S=Math.round(S/Q)*Q}}if(S>95&&F===0){G.css("z-index",3)}else{G.css("z-index","")}if(R[r]&&S!=K){if(F===0){n.modelMin=parseFloat((((S*x)/100)+n.min)).toFixed(n.decimalPlaces)}else{if(F===1){n.modelMax=parseFloat((((S*x)/100)+n.min)).toFixed(n.decimalPlaces)}}n.$apply();K=S}H=U}).bind(f,function(){if(angular.isFunction(n.onHandleUp)){n.onHandleUp()}M.off(k);angular.element("body").removeClass("ngrs-touching");G.removeClass("ngrs-down");D.removeClass("ngrs-focus "+O)})}})}function E(F){n.disabled=true;throw new Error("RangeSlider: "+F)}function p(F){l.warn(F)}n.$on("$destroy",function(){D.off(k);angular.element("body").off(k);d.off(k);for(var G=0,F=m.length;G<F;G++){m[G].off(k);m[G].off(k+"X")}});D.bind("selectstart"+k,function(F){return false}).bind("click",function(F){F.stopPropagation()});q(0);q(1)}}}]);window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1000/60)}})()}());